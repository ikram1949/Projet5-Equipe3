// ğŸ”¹ Modifier profil
apiRouter.put('/update-profile', verifyToken, (req, res) => {
  const { name, email, password } = req.body;
  if (!name || !email) return res.status(400).json({ message: 'Nom et email requis.' });

  const updateUser = () => {
    db.run('UPDATE users SET name = ?, email = ? WHERE id = ?', [name, email, req.user.id], err => {
      if (err) return res.status(500).json({ message: 'Erreur mise Ã  jour.' });
      res.json({ message: 'Profil mis Ã  jour.' });
    });
  };

  if (password) {
    bcrypt.hash(password, 10, (err, hash) => {
      if (err) return res.status(500).json({ message: 'Erreur hash mot de passe.' });
      db.run('UPDATE users SET password = ? WHERE id = ?', [hash, req.user.id], err => {
        if (err) return res.status(500).json({ message: 'Erreur mise Ã  jour mot de passe.' });
        updateUser();
      });
    });
  } else {
    updateUser();
  }
});